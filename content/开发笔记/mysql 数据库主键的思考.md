---
tags:
  - mysql
---

# mysql 数据库主键的思考

## 1 自增主键优点

1. 数据库 AUTO_INCREMENT，innodb 的「索引特性」导致了**自增 id 做主键是效率最好**的，而且是增量增长，按顺序存放，对于检索非常有利；
	1) 普通单条或者 20 条左右的记录检索，uuid 为主键的相差不大几乎效率相同；
	2) 范围查询特别是上百成千条的记录查询，自增 id 的效率要大于 uuid；  
	3) 在范围查询做统计汇总的时候，自增 id 的效率要大于 uuid；  
	4) 在存储上面，自增 id 所占的存储空间是 uuid 的 1/2；  
	5) 在备份恢复上，自增 ID 主键稍微优于 UUID。
2. 数字型，「占用空间小」，易排序；
3. 如果通过非系统增加记录时，可以不用指定该字段，「不用担心主键重复问题」。

## 2 缺点

**id 冲突问题**

## 3 结论

1. 小型系统或者系统架构初期，数据没有超过百万或者千万，可以使用自增主键
2. 当数据成长到几百万或者超过千万时，并且增量很高时，这时就涉及到分库分表，这时就必须使用自动生成 id 方案