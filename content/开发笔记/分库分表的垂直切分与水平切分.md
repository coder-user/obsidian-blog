# 分库分表的垂直切分与水平切分

> [分库分表的垂直切分与水平切分看这篇就够了！](https://www.51cto.com/article/698289.html)

## 1 什么是分库分表

分库分表的方式有垂直切分，水平切分

> [!question]+ 分库分表能带来什么样的好处?
> 1. 数据库分表可以解决单表海量数据的查询性能问题
> 2. 数据库分库可以解决单台数据库的并发访问压力问题


> [!question]+ 什么时候考虑使用分库分表呢? 
> - 能不使用分库分表就尽量不使用分库分表，并不是所有的表都需要进行切分的，主要还是看数据的增长速度。
> - 不到万不得已不要轻易使用分库分表，避免 “过度设计” 和“过早优化”。
> - 在进行分库分表之前，不要是因为想分而分，更是要先去做力所能及的事情，比如说：给硬件升级、给网络升级、读写分离等等。数据量达到单表的瓶颈时在考虑使用分库分表

## 2 分表策略

### 2.1 垂直角度 (表结构不一样)

将一个表字段拆分成多个表，每个表存储部分字段。好处是避免 IO 时锁表的次数，**分离热点字段**和**非热点字段**，避免大字段 IO 导致性能下降。

**原则**

1. 业务经常组合查询的字段一个表; 
2. 不常用字段一个表; text、blob 类型字段作为附属表。

### 2.2 水平角度 (表结构一样)

同个数据库内，把一个表的数据按照一定规则拆分到多个表中，对数据进行拆分，不影响表结构。好处是单个表的数据量少了，业务 SQL 执行效率高，降低了系统的 IO 和 CPU 压力。

**原则**

1. 选择合适的分片键和分片策略，和业务场景配合;
2.  避免数据热点和访问不均衡、避免二次扩容难度大。